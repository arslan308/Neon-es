<section data-section-id="{{ section.id }}" data-section-type="list-collections" style="padding-top: 60px;" class="collection-list-wrapper">
  <div class="container">
    <div class="collection-list-main">
      <div class="mobile-filter-wrapper">
        <button id="openMobileFilterBtn" class="filter-button"><img src="https://cdn.shopify.com/s/files/1/0779/7686/3066/files/page_info.svg?v=1748611226"/><span>Filter</span></button>
      </div>

      <div class="filter-modal">
        <div class="filter-modal-header" style="display: flex ; align-items: center; gap: 11px;">
          <div id="closeMobileFilterBtn" class="filter-modal-close-btn">
            <div style="height: 28px; width: 28px; border-radius: 50%; padding: 7px; background: #715AEF;">
              <img style="height 13px; width: 13px;" src="https://cdn.shopify.com/s/files/1/0779/7686/3066/files/arrow_back_1.svg?v=1748616366"/>
            </div>
            <span style="font-size: 15px; font-weight: 400;">Terug</span>
          </div>
          <div class="reset-apply-btn" style="display: flex ; gap: 11px; align-items: center;">
              <button class="reset-btn" style="background: #715AEF; padding: 10px; border-radius: 8px; color: white; display: flex ; align-items: center; gap: 10px; line-height: 100%;">
                <img style="height: 16px; width: 16px;" src="https://cdn.shopify.com/s/files/1/0779/7686/3066/files/autorenew.svg?v=1748616532"/>
                <span>Reset</span>
              </button>
              <button class="apply-btn" style="background: #EC40A4; border-radius: 8px; padding: 10px; display: flex ; align-items: center; gap: 10px; color: white; line-height: 100%;">
                <img style="height: 16px; width: 16px;" src="https://cdn.shopify.com/s/files/1/0779/7686/3066/files/page_info_1.svg?v=1748617845"/>
                <span>Apply</span>
              </button>
          </div>
        </div> 
        <div class="filter-modal-content">
          <div class="side-bar-filter">
            <div class="sidebar-menu" style="width: 277px; padding-bottom: 32px;">
              {% assign collection_global_index = 0 %}
              {% for block in section.blocks %}
                {% if block.type == 'menu' %}
                  <div class="menu-block {{ block.settings.collection_class }}">
                    <h3 class="menu-title" style="font-size: 18px; font-weight: 700; color: black; line-height: 100%">{{ block.settings.title }}</h3>
                    {% if block.settings.menu_items != blank %}
                      {% assign menu_items = block.settings.menu_items | split: ',' %}
                      <ul class="menu-items" style="display: grid ; grid-gap: 8px;">
                        {% for item in menu_items %}
                          {% assign trimmed_item = item | strip %}
                          {% assign handle = trimmed_item | handleize %}
                          {% assign collection = collections[handle] %}
                          {% if collection %}
                          <li class="collections-filter" data-collection-index="{{ collection_global_index }}" data-url="{{ collection.url }}" style="{% if collection_global_index >= 3 %}display: none;{% endif %}">
                              <a style="display: flex; align-items: center; width: 100%;">
                                {% if collection.featured_image %}
                                  <div style="width: 100%; max-width:90px; height: 64px; object-fit: cover; border-radius: 8px;">
                                    <img src="{{ collection.featured_image | image_url: width: 100 }}" alt="{{ collection.title }}" style="width: 100%; height: 64px; object-fit: cover; border-radius: 8px 0 0 8px;">
                                  </div>
                                {% else %}
                                  <div style="width: 40px; height: 40px; background: #eee; border-radius: 6px;"></div>
                                {% endif %}
                                <span style="justify-content: flex-start; align-items: center; width: 100%; padding-left: 20px;font-size: 15px; font-weight: 700; color: black;">{{ collection.title }}</span>
                              </a>
                            </li>
                            {% assign collection_global_index = collection_global_index | plus: 1 %}
                          {% endif %}
                        {% endfor %}
                      </ul>
                    {% endif %}
                  </div>
                {% endif %}
              {% endfor %}
              {% if collection_global_index > 3 %}
                <button class="toggleCollectionsBtn" data-toggle-target="main-menu" style="text-decoration: underline; margin-top: 10px; color: #e6007e; background: none; border: none; cursor: pointer;">Show more</button>
              {% endif %}
            </div>
            <div class="sidebar-icon-menu" style="width: 277px;">
              {% for block in section.blocks %}
                {% if block.type == 'icon_collection_block' %}
                  {% assign block_index = forloop.index0 %}

                  <div class="menu-block {{ block.settings.collection_class_bar }}" data-block-index="{{ block_index }}">
                    <h3 class="menu-title" style="font-size: 18px; font-weight: 700; color: black; margin-bottom: 16px; line-height: 100%">
                      {{ block.settings.title_sec }}
                    </h3>

                    {% if block.settings.menu_items_sec != blank %}
                      {% assign menu_items = block.settings.menu_items_sec | split: ',' %}
                      {% assign icons = block.settings.icons | newline_to_br | split: '<br />' %}
                      {% assign icon_block_item_count = 0 %}

                      <ul class="menu-items" id="menu-item-hover" style="display: grid; grid-gap: 8px;" data-icons-list="{{ block_index }}">
                        {% for item in menu_items %}
                          {% assign trimmed_item = item | strip %}
                          {% assign handle = trimmed_item | handleize %}
                          {% assign collection = collections[handle] %}

                          {% if collection %}
                            <li data-url="{{ collection.url }}"
                                class="icon-item collection-page-menu"
                                data-icon-index="{{ icon_block_item_count }}"
                                data-block="{{ block_index }}"
                                style="display: {% if icon_block_item_count < 4 %}flex{% else %}none{% endif %};">
                              <a>
                                <div class="icon-item-icon">
                                  <img src="{{ icons[forloop.index0] | strip }}" style="width: 16px; height: 16px; object-fit: contain;">
                                </div>
                                <span style="font-size: 15px; font-weight: 700; color: black;">{{ collection.title }}</span>
                              </a>
                            </li>
                            {% assign icon_block_item_count = icon_block_item_count | plus: 1 %}
                          {% endif %}
                        {% endfor %}
                      </ul>

                      {% if icon_block_item_count > 4 %}
                        <button class="toggleIconsBtn"
                                data-toggle-target="{{ block_index }}"
                                style="text-decoration: underline; margin-top: 10px; color: #e6007e; background: none; border: none; cursor: pointer;">
                          Show more
                        </button>
                      {% endif %}
                    {% endif %}
                  </div>
                {% endif %}
              {% endfor %}
            </div>
            <div class="reset-apply-btn" style="display: grid; grid-gap: 11px; align-items: center; padding: 25px 0 52px 0;">
              <button class="apply-btn" style="justify-content: center; background: #EC40A4; border-radius: 8px; padding: 10px; display: flex ; align-items: center; gap: 10px; color: white; line-height: 100%;">
                <img style="height: 16px; width: 16px;" src="https://cdn.shopify.com/s/files/1/0779/7686/3066/files/page_info_1.svg?v=1748617845"/>
                <span>Apply Filter</span>
              </button>
              <button class="reset-btn" style="justify-content: center; background: #715AEF; padding: 10px; border-radius: 8px; color: white; display: flex ; align-items: center; gap: 10px; line-height: 100%;">
                <img style="height: 16px; width: 16px;" src="https://cdn.shopify.com/s/files/1/0779/7686/3066/files/autorenew.svg?v=1748616532"/>
                <span>Reset</span>
              </button>
            </div>
          </div>
        </div>
      </div>

      {%- assign has_brand_collections = false -%}
      {%- assign has_normal_collections = false -%}
      
      {%- if section.settings.collections_to_show == 'all' -%}
        {%- for collection in collections -%}
          {%- if collection.template_suffix contains 'brand' -%}
            {%- assign has_brand_collections = true -%}
          {%- else -%}
            {%- assign has_normal_collections = true -%}
          {%- endif -%}
        {%- endfor -%}
      {%- else -%}
        {%- if section.settings.collection_linklist != blank -%}
          {%- for link in section.settings.collection_linklist.links -%}
            {%- if link.type == 'collection_link' -%}
              {%- if link.object.template_suffix contains 'brand' -%}
                {%- assign has_brand_collections = true -%}
              {%- else -%}
                {%- assign has_normal_collections = true -%}
              {%- endif -%}
            {%- endif -%}
          {%- endfor -%}
        {%- else -%}
          {%- for block in section.blocks -%}
            {%- assign collection = block.settings.popular_collection -%}
            {%- if collection -%}
              {%- if collection.template_suffix contains 'brand' -%}
                {%- assign has_brand_collections = true -%}
              {%- else -%}
                {%- assign has_normal_collections = true -%}
              {%- endif -%}
            {%- endif -%}
          {%- endfor -%}
        {%- endif -%}
      {%- endif -%}
      
      {%- if has_normal_collections -%}
        {%- paginate collections by 48 -%}
          <div class="collection-list__section">
            <div class="pop-collection-main">
              <h2 class="section-title">{{ section.settings.section_name }}</h2>
                <div class="popular-collections-wrapper">
                  {%- if section.settings.collections_to_show == 'all' -%}
                    {%- for collection in collections -%}
                      {%- unless collection.template_suffix contains 'brand' -%}
                        <div class="grid__cell 1/2--tablet 1/3--lap-and-up">
                          <a href="{{ collection.url }}" class="collection-block-item {% if section.settings.show_collection_overlay %}collection-block-item--overlay{% endif %}">
                            <div class="aspect-ratio" style="padding-bottom: 45%">
                              {%- if collection.featured_image != blank -%}
                                {{- collection.featured_image | image_url: width: collection.featured_image.width | image_tag:
                                  loading: 'lazy',
                                  sizes: 'min(100vw, 850px)',
                                  widths: '200,300,400,500,600,800,1000,1200,1400',
                                  class: 'collection-block-item__image image-background'
                                -}}
                              {%- endif -%}
                            </div>
                          </a>
      
                          {%- if section.settings.show_collection_title -%}
                            <div class="collection-block-item__text">
                              <p class="collection-block-item__title heading h2">
                                <a href="{{ collection.url }}">{{ collection.title }}</a>
                                {%- if collection.products_count > 0 -%}
                                  <span class="collection-badge">{{ collection.products_count }}+</span>
                                {%- endif -%}
                              </p>
      
                              {%- if collection.description != blank -%}
                                <div class="collection-block-item__description">
                                  {{ collection.description | strip_html | truncate: 100 }}
                                </div>
                              {%- endif -%}
                            </div>
                          {%- endif -%}
                        </div>
                      {%- endunless -%}
                    {%- endfor -%}
                  {%- else -%}
                      {%- for block in section.blocks -%}
                        <div class="grid__cell 1/2--tablet 1/3--lap-and-up {{ block.settings.collection_class }}">
                          {%- assign collection = block.settings.popular_collection -%}
                          {%- assign product = block.settings.popular_product -%}
                      
                          {%- if collection and collection.handle != blank -%}
                            {%- unless collection.template_suffix contains 'brand' -%}
                              <a href="{{ collection.url }}" class="collection-block-item {% if section.settings.show_collection_overlay %}collection-block-item--overlay{% endif %}" {{ block.shopify_attributes }}>
                                <div class="aspect-ratio" style="padding-bottom: 61%">
                                  {{- collection.featured_image | image_url: width: collection.featured_image.width | image_tag:
                                    loading: 'lazy',
                                    sizes: 'min(100vw, 850px)',
                                    widths: '200,300,400,500,600,800,1000,1200,1400',
                                    class: 'collection-block-item__image image-background'
                                  -}}
                                </div>
                              </a>
                      
                              {%- if section.settings.show_collection_title -%}
                                <div class="collection-block-item__text">
                                  <p class="collection-block-item__title heading h2">
                                    <a href="{{ collection.url }}">{{ collection.title }}</a>
                                    {%- if collection.products_count > 0 -%}
                                      <span class="collection-badge">{{ collection.products_count }}+</span>
                                    {%- endif -%}
                                  </p>
                                  {%- if collection.description != blank -%}
                                    <div class="collection-block-item__description">
                                      {{ collection.description | strip_html | truncate: 100 }}
                                    </div>
                                  {%- endif -%}
                                </div>
                              {%- endif -%}
                            {%- endunless -%}
                      
                            {%- elsif product and product.handle != blank -%}
                                <a href="{{ product.url }}" class="collection-block-item {% if section.settings.show_collection_overlay %}collection-block-item--overlay{% endif %}" {{ block.shopify_attributes }}>
                                  <div class="aspect-ratio" style="padding-bottom: 61%">
                                    {{- product.featured_image | image_url: width: product.featured_image.width | image_tag:
                                      loading: 'lazy',
                                      sizes: 'min(100vw, 850px)',
                                      widths: '200,300,400,500,600,800,1000,1200,1400',
                                      class: 'collection-block-item__image image-background'
                                    -}}
                                  </div>
                                </a>
                          
                                {%- if section.settings.show_collection_title -%}
                                  <div class="collection-block-item__text">
                                    <p class="collection-block-item__title heading h2">
                                      <a href="{{ product.url }}">{{ product.title }}</a>
                                    </p>
                              
                                    {%- if block.settings.product_description != blank -%}
                                      <div class="collection-block-item__description">
                                        {{ block.settings.product_description | escape }}
                                      </div>
                                    {%- endif -%}
                                  </div>
                                {%- endif -%}
                          {%- endif -%}
                        </div>
                      {%- endfor -%}                  
                  {%- endif -%}
                </div>
            </div>
            {%- assign excluded_handles = '' -%}
            {%- for block in section.blocks -%}
              {%- assign popular = block.settings.popular_collection -%}
              {%- if popular != blank -%}
                {%- assign excluded_handles = excluded_handles | append: popular.handle | append: ',' -%}
              {%- endif -%}
            {%- endfor -%}
            {%- if section.settings.excluded_collections != blank -%}
              {%- assign manual_excludes = section.settings.excluded_collections  -%}
              {%- assign excluded_handles = excluded_handles | append: manual_excludes  -%}
            {%- endif -%}
            {% comment %} {%- assign excluded_handles2 = excluded_handles | split: ',' | map: 'strip' | map: 'handleize' -%} {% endcomment %}
            {%- if section.settings.section_name_all != blank -%}
              <div class="all-collection-main"> 
                <h2 class="section-title">{{ section.settings.section_name_all }}</h2>
                <div class="grid more-collections-grid">
                  {%- for collection in collections -%}
                    {%- assign handle_down = collection.handle | downcase -%}
                    {%- assign title_down = collection.title | handleize -%}
                    {%- unless 
                      excluded_handles contains handle_down
                      or excluded_handles contains title_down
                      or handle_down == 'all'
                      or handle_down == 'custom-logo'
                      or collection.template_suffix contains 'brand'
                      or collection.featured_image == blank
                    -%}
            
                      <div class="grid__cell 1/2--tablet 1/3--lap-and-up">
                        <div class="collection-block-item-wrapper">
                          <a href="{{ collection.url }}" class="collection-block-item {% if section.settings.show_collection_overlay %}collection-block-item--overlay{% endif %}">
                            <div class="aspect-ratio" style="padding-bottom: 61%">
                              {{ collection.featured_image | image_url: width: collection.featured_image.width | image_tag:
                                  loading: 'lazy',
                                  sizes: 'min(100vw, 850px)',
                                  widths: '200,300,400,500,600,800,1000,1200,1400',
                                  class: 'collection-block-item__image image-background'
                              }}
                            </div>
                          </a>
            
                          {%- if section.settings.show_collection_title -%}
                            <div class="collection-block-item__text">
                              <p class="collection-block-item__title heading h2">
                                <a href="{{ collection.url }}">{{ collection.title }}</a>
                                {%- if collection.products_count > 0 -%}
                                  <span class="collection-badge">{{ collection.products_count }}+</span>
                                {%- endif -%}
                              </p>
            
                              {%- if collection.description != blank -%}
                                <div class="collection-block-item__description">
                                  {{ collection.description | strip_html | truncate: 100 }}
                                </div>
                              {%- endif -%}
                            </div>
                          {%- endif -%}
                        </div>
                      </div>
            
                    {%- endunless -%}
                  {%- endfor -%}
                </div>
              </div>
            {%- endif -%}
          </div>
            {%- if section.settings.collections_to_show == 'all' -%}
              {%- render 'pagination', paginate: paginate -%}
            {%- endif -%}
        {%- endpaginate -%}
      {%- endif -%}
      {%- if has_brand_collections -%}
        <div class="collection-list__section">
          <header class="page__header page__header--stack page__header--centered">
            <h1 class="page__title heading h1">{{ 'collection.general.brands' | t }}</h1>
          </header>
      
          <div class="quick-links">
            {%- if section.settings.collections_to_show == 'all' -%}
              {%- for collection in collections -%}
                {%- if collection.template_suffix contains 'brand' -%}
                  {%- assign collection_image = collection.image | default: collection.products.first.featured_media -%}
                  {%- assign max_height_mobile = 50 -%}
                  {%- assign max_height_desktop = 90 -%}
                  {%- assign max_width_mobile = 100 | divided_by: collection_image.aspect_ratio | at_most: 100 -%}
                  {%- assign max_width_desktop = 140 | divided_by: collection_image.aspect_ratio | at_most: 140 -%}
      
                  {%- if collection_image.aspect_ratio < 1.5 -%}
                    {%- if collection_image.height < max_height_desktop -%}
                      {%- assign max_width_desktop = collection_image.width | times: collection_image.aspect_ratio | round -%}
                    {%- else -%}
                      {%- assign max_width_desktop = max_height_desktop | times: collection_image.aspect_ratio | round -%}
                    {%- endif -%}
      
                    {%- if collection_image.height < max_height_mobile -%}
                      {%- assign max_width_mobile = collection_image.width | times: collection_image.aspect_ratio | round -%}
                    {%- else -%}
                      {%- assign max_width_mobile = max_height_mobile | times: collection_image.aspect_ratio | round -%}
                    {%- endif -%}
                  {%- elsif collection_image.aspect_ratio > 2.5 -%}
                    {%- assign max_width_mobile = 100 -%}
                    {%- assign max_width_desktop = 140 -%}
                  {%- endif -%}
      
                  <a id="block-{{ forloop.index0 }}" href="{{ collection.url }}" class="quick-links__link">
                    <div  class="quick-links__image-container">
                      <div class="quick-links__image-ie-fix">
                        {{- collection_image | image_url: width: collection_image.width | image_tag: loading: 'lazy', sizes: '240px', widths: '240,480,720' -}}
                      </div>
                    </div>
                  </a>
      
                  <style>
                    #block-{{ forloop.index0 }} .quick-links__image-ie-fix {
                      max-width: {{ max_width_mobile }}px;
                    }
      
                    @media screen and (min-width: 641px)  {
                      #block-{{ forloop.index0 }} .quick-links__image-ie-fix {
                        max-width: {{ max_width_desktop }}px;
                      }
                    }
                  </style>
                {%- endif -%}
              {%- endfor -%}
            {%- else -%}
              {% if section.settings.collection_linklist != blank %}
                {%- for link in section.settings.collection_linklist.links -%}
                  {%- if link.type == 'collection_link' -%}
                    {%- assign collection = link.object -%}
                    {%- if collection and collection.template_suffix contains 'brand' -%}
                      {%- assign collection_image = collection.image | default: collection.products.first.featured_media -%}
                      {%- assign max_height_mobile = 50 -%}
                      {%- assign max_height_desktop = 90 -%}
                      {%- assign max_width_mobile = 100 | divided_by: collection_image.aspect_ratio | at_most: 100 -%}
                      {%- assign max_width_desktop = 140 | divided_by: collection_image.aspect_ratio | at_most: 140 -%}
      
                      {%- if collection_image.aspect_ratio < 1.5 -%}
                        {%- if collection_image.height < max_height_desktop -%}
                          {%- assign max_width_desktop = collection_image.width | times: collection_image.aspect_ratio | round -%}
                        {%- else -%}
                          {%- assign max_width_desktop = max_height_desktop | times: collection_image.aspect_ratio | round -%}
                        {%- endif -%}
      
                        {%- if collection_image.height < max_height_mobile -%}
                          {%- assign max_width_mobile = collection_image.width | times: collection_image.aspect_ratio | round -%}
                        {%- else -%}
                          {%- assign max_width_mobile = max_height_mobile | times: collection_image.aspect_ratio | round -%}
                        {%- endif -%}
                      {%- elsif collection_image.aspect_ratio > 2.5 -%}
                        {%- assign max_width_mobile = 100 -%}
                        {%- assign max_width_desktop = 140 -%}
                      {%- endif -%}
      
                      <a id="block-{{ forloop.index0 }}" href="{{ collection.url }}" class="quick-links__link">
                        <div  class="quick-links__image-container">
                          <div class="quick-links__image-ie-fix">
                            {{- collection_image | image_url: width: collection_image.width | image_tag: loading: 'lazy', sizes: '240px', widths: '240,480,720' -}}
                          </div>
                        </div>
                      </a>
      
                      <style>
                        #block-{{ forloop.index0 }} .quick-links__image-ie-fix {
                          max-width: {{ max_width_mobile }}px;
                        }
      
                        @media screen and (min-width: 641px)  {
                          #block-{{ forloop.index0 }} .quick-links__image-ie-fix {
                            max-width: {{ max_width_desktop }}px;
                          }
                        }
                      </style>
                    {%- endif -%}
                  {%- endif -%}
                {%- endfor -%}
              {% else %}
                {%- for block in section.blocks -%}
                  {%- assign collection = block.settings.popular_collection -%}
                  {%- if collection and collection.template_suffix contains 'brand' -%}
                    {%- assign collection_image = collection.image | default: collection.products.first.featured_media -%}
                    {%- assign max_height_mobile = 50 -%}
                    {%- assign max_height_desktop = 90 -%}
                    {%- assign max_width_mobile = 100 | divided_by: collection_image.aspect_ratio | at_most: 100 -%}
                    {%- assign max_width_desktop = 140 | divided_by: collection_image.aspect_ratio | at_most: 140 -%}
      
                    {%- if collection_image.aspect_ratio < 1.5 -%}
                      {%- if collection_image.height < max_height_desktop -%}
                        {%- assign max_width_desktop = collection_image.width | times: collection_image.aspect_ratio | round -%}
                      {%- else -%}
                        {%- assign max_width_desktop = max_height_desktop | times: collection_image.aspect_ratio | round -%}
                      {%- endif -%}
      
                      {%- if collection_image.height < max_height_mobile -%}
                        {%- assign max_width_mobile = collection_image.width | times: collection_image.aspect_ratio | round -%}
                      {%- else -%}
                        {%- assign max_width_mobile = max_height_mobile | times: collection_image.aspect_ratio | round -%}
                      {%- endif -%}
                    {%- elsif collection_image.aspect_ratio > 2.5 -%}
                      {%- assign max_width_mobile = 100 -%}
                      {%- assign max_width_desktop = 140 -%}
                    {%- endif -%}
      
                    <a id="block-{{ block.id }}" href="{{ collection.url }}" class="quick-links__link" {{ block.shopify_attributes }}>
                      <div  class="quick-links__image-container">
                        <div class="quick-links__image-ie-fix">
                          {{- collection_image | image_url: width: collection_image.width | image_tag: loading: 'lazy', sizes: '240px', widths: '240,480,720' -}}
                        </div>
                      </div>
                    </a>
      
                    <style>
                      #block-{{ block.id }} .quick-links__image-ie-fix {
                        max-width: {{ max_width_mobile }}px;
                      }
      
                      @media screen and (min-width: 641px)  {
                        #block-{{ block.id }} .quick-links__image-ie-fix {
                          max-width: {{ max_width_desktop }}px;
                        }
                      }
                    </style>
                  {%- endif -%}
                {%- endfor -%}
              {%- endif -%}
            {%- endif -%}
          </div>
        </div>
      {%- endif -%}
    </div>
  </div>

  <style>
    #shopify-section-{{ section.id }} .collection-block-item--overlay::before {
      {%- assign overlay_opacity = section.settings.collection_overlay_opacity | divided_by: 100.0 -%}
      background: {{ '#000000' | color_modify: 'alpha', overlay_opacity }}
    }
    .collection-list-main{
      display: flex;
      gap: 72px;
    }
    .collection-list-main .collection-list__section{width: 100%;}
    .collection-list-main .first-block {
      background: #fdf2ff;
      border-radius: 6px;
      border: 2px solid #ccc;
      padding: 10px;
    }

    .collection-list-main .submenu-block {
      background: #fff;
      border: 1px solid #ddd;
      margin-top: 15px;
    }
    /* .sidebar-menu li[data-collection-index]:nth-child(odd){
      border: 2px solid #EC40A4 !important;
    } */
    .swiper-container {
      width: 100%;
      height: auto;
    }
    .swiper-slide {
      text-align: center;
      font-size: 18px;
      background: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .filter-button {
      display: none;
    }
    @media screen and (max-width: 768px) {
      .collection-list__section .section-title{
        margin-left: 0px;
      }
      .Collection-list-banner .section-info .heading{
        font-size:24px;
      }
      .collection-list-wrapper{
        padding-top: 0px !important;
      }
      .collection-list-main {
        flex-direction: column;
        gap: 0;
      }

      .side-bar-filter {
        display: none; 
      }

      .mobile-filter-wrapper {
        display: flex; 
        justify-content: flex-start;
        width: 100%;
        box-sizing: border-box;
        margin-top: 130px;
      }

      .filter-button {
        display: flex !important;
        gap:4px;
        justify-content: center;
        background-color: #FFEBF7;
        color: black;
        align-items: center;
        border: none;
        padding: 10px 20px;
        border-radius: 8px;
        font-weight: 400;
        cursor: pointer;
        font-size: 16px;
        width: 100%;
        text-align: center;
        margin-bottom: 36px;
      }

      .filter-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(255, 255, 255, 0.98);
        z-index: 9999;
        overflow-y: auto;
        transition: opacity 0.3s ease;
        opacity: 0;
        pointer-events: none;
      }

      .filter-modal.active {
        display: block;
        opacity: 100%;
        pointer-events: auto;
        background: #F7F5FF;
      }

      .filter-modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 45px 20px 41px;
        background-color: #F7F5FF;

      }

      .filter-modal-title {
        margin: 0;
        font-size: 22px;
        color: black;
      }

      .filter-modal-close-btn {
        background: none;
        display: flex;
        align-items: center;
        gap:8px;
        border: none;
        font-size: 30px;
        cursor: pointer;
        color: black;
        
      }

      .filter-modal-content {
        padding: 0 20px 20px 20px;
      }

      .filter-modal-content .side-bar-filter {
        display: block;
        width: 100%;
      }

      .filter-modal-content .sidebar-menu,
      .filter-modal-content .sidebar-icon-menu {
        width: 225px !important;
      }

      .filter-modal-content .sidebar-menu span {
          padding: 10px 15px !important; 
          font-size: 15px !important;
          line-height: 100%;
      }
      .filter-modal-content .sidebar-menu h3.menu-title {
          font-size: 20px !important;
          margin-bottom: 10px;
      }
      .filter-modal-content .sidebar-icon-menu h3.menu-title {
          font-size: 20px !important;
          margin-bottom: 10px;
      }

      .pop-collection-main .grid {
        display: none;
      }

      .popular-collections-slider {
        display: block; 
        margin-left: -20px;
        margin-right: -20px;
        padding-left: 20px; 
        padding-right: 20px;
      }

      .popular-collections-slider .swiper-slide {
        width: calc(50% - 10px); /* Show 2 items, adjust gap as needed */
        margin-right: 20px; /* Gap between slides */
      }
      .popular-collections-slider .swiper-slide:last-child {
        margin-right: 0;
      }

      .more-collections-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr); /* 2 columns on mobile */
        /* gap: 15px; Gap between items */
      }
      .more-collections-grid .grid__cell {
        width: auto; /* Let grid handle width */
      }
      .Collection-list-banner{
        flex-direction: column;
        /* padding: 57px 0 143px 0; */
      }
      /* .Collection-list-banner-main{
        padding: 57px 0 150px 0 !important;
      } */
      /* .Collection-list-banner-main{
        margin-bottom: 116px;
      } */
      .Collection-list-banner-main .logo-design-card{
        position: absolute;
        width: 90%;
        left: 50%;
        top: 65%;
        transform: translateX(-50%);
        }
        .Collection-list-banner .design-card .points-list ul{
          flex-direction: column;
          gap: 4px;
        }
        .Collection-list-banner .design-card .points-list ul li{
          line-height: 1.5;
          
        }
        .Collection-list-banner .design-card .points-list ul li:after{
          width: 8px;
          height: 8px;
          top:0;
        }
        .Collection-list-banner .design-card{
          grid-gap: 7px;
          padding: 24px;
        }
        .slick-track{
          margin-left: -6px !important;
        }
        .all-collection-main{
          margin-top: 0 !important;
        }
      }
      .all-collection-main{
        margin-top: 48px;
      }
      .filter-modal-content .sidebar-icon-menu h3.menu-title{
        line-height: 100%;
      }
    /* Desktop styles for popular collections (ensure they remain a grid) */
    @media screen and (min-width: 769px) {
      .popular-collections-wrapper{
        display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
    margin: 0 0 -30px -30px;
      }
      .reset-apply-btn{
        display: none !important;
      }
      .grid__cell{
         width: 100% !important;
      }
      .filter-modal-close-btn{
        display: none;
      }
      .popular-collections-slider {
        display: none; /* Hide Swiper container on desktop */
      }
      .pop-collection-main .grid {
        display: grid; /* Show default grid on desktop */
      }
      .more-collections-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr); /* 3 columns on desktop for more collections */
        gap: 20px;
      }
    }
    .collection-list__section .swiper-button-prev{display:none;}
    .collection-list__section .swiper-button-next{display: none;}
  </style>
</section>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const openFilterBtn = document.getElementById('openMobileFilterBtn');
    const closeFilterBtn = document.getElementById('closeMobileFilterBtn');
    const filterModal = document.querySelector('.filter-modal');

    if (openFilterBtn && filterModal) {
      openFilterBtn.addEventListener('click', () => {
        filterModal.classList.add('active');
        document.body.style.overflow = 'hidden';
      });
    }

    if (closeFilterBtn && filterModal) {
      closeFilterBtn.addEventListener('click', () => {
        filterModal.classList.remove('active');
        document.body.style.overflow = '';
      });
    }

    // Initialize Slick Slider on mobile only
    function initSlickSlider() {
      const $slider = $('.popular-collections-wrapper');
      if (window.innerWidth <= 768) {
        if (!$slider.hasClass('slick-initialized')) {
          $slider.slick({
            slidesToShow: 2,
            slidesToScroll: 1,
            arrows: false,
            dots: false,
            infinite: false,
            mobileFirst: true
          });
        }
      } else {
        if ($slider.hasClass('slick-initialized')) {
          $slider.slick('unslick');
        }
      }
    }

    initSlickSlider();
    window.addEventListener('resize', initSlickSlider);

  
    // Filter Buttons
    document.getElementById('resetHeaderBtn')?.addEventListener('click', () => {
      console.log('Reset header filters');
      // Reset logic here
    });

    document.getElementById('applyHeaderBtn')?.addEventListener('click', () => {
      console.log('Apply header filters');
      filterModal.classList.remove('active');
      document.body.style.overflow = '';
    });

    document.getElementById('applyFilterBtn')?.addEventListener('click', () => {
      console.log('Apply footer filters');
      filterModal.classList.remove('active');
      document.body.style.overflow = '';
    });

    document.getElementById('resetFilterBtn')?.addEventListener('click', () => {
      console.log('Reset footer filters');
      // Reset logic here
    });
  });
</script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // --- Toggle COLLECTIONS LIST ---
    document.querySelectorAll('.toggleCollectionsBtn').forEach(button => {
      button.addEventListener('click', () => {
        const parentSection = button.closest('.sidebar-menu');
        const hiddenItems = parentSection?.querySelectorAll('li[data-collection-index]');
        if (!hiddenItems) return;

        const isShowingLess = button.textContent.trim().toLowerCase() === 'show less';

        hiddenItems.forEach((li, index) => {
          if (index >= 3) {
            li.style.display = isShowingLess ? 'none' : 'flex';
          }
        });

        button.textContent = isShowingLess ? 'Show more' : 'Show less';
      });
    });
  });
</script>
<script>
document.addEventListener("DOMContentLoaded", function () {
  document.querySelectorAll('.toggleIconsBtn').forEach(button => {
    button.addEventListener('click', () => {
      const targetBlockIndex = button.getAttribute('data-toggle-target');
      const iconList = document.querySelector(`.menu-items[data-icons-list="${targetBlockIndex}"]`);
      if (!iconList) return;

      const iconItems = iconList.querySelectorAll('li.icon-item');
      const isExpanded = button.textContent.trim().toLowerCase() === 'show less';

      iconItems.forEach((li, index) => {
        if (index >= 4) {
          li.style.display = isExpanded ? 'none' : 'flex';
        }
      });

      button.textContent = isExpanded ? 'Show more' : 'Show less';
    });
  });
});

</script>

<style>
  .collections-filter:hover a span{
    color: #EC40A4 !important;
  }
  .collections-filter.selected {
    border: 2px solid #EC40A4 !important;
    border-radius: 10px;
    background: #ffebf7;
  }
</style>
<script>
  document.addEventListener("DOMContentLoaded", function () {
  const collectionFilters = document.querySelectorAll('.collections-filter');
  const iconFilters = document.querySelectorAll('.icon-item');
  const applyBtns = document.querySelectorAll('.apply-btn');
  const resetBtns = document.querySelectorAll('.reset-btn');
  let selectedCollection = null;

  function isMobile() {
    return window.innerWidth <= 768;
  }

  // Handle collection filter click
  collectionFilters.forEach(item => {
    item.addEventListener('click', function () {
      const url = this.getAttribute('data-url');

      if (isMobile()) {
        collectionFilters.forEach(f => f.classList.remove('selected'));
        iconFilters.forEach(f => f.classList.remove('select-icon-filter'));
        this.classList.add('selected');
        selectedCollection = url;
      } else {
        window.location.href = url;
      }
    });
  });

  // Handle icon-item click
  iconFilters.forEach(item => {
    item.addEventListener('click', function (e) {
      const url = this.getAttribute('data-url');

      if (isMobile()) {
        e.preventDefault();
        iconFilters.forEach(f => f.classList.remove('select-icon-filter'));
        collectionFilters.forEach(f => f.classList.remove('selected'));
        this.classList.add('select-icon-filter');
        selectedCollection = url;
      } else {
        window.location.href = url;
      }
    });
  });

  // Apply button click
  applyBtns.forEach(btn => {
    btn.addEventListener('click', function () {
      if (isMobile() && selectedCollection) {
        window.location.href = selectedCollection;
      }
    });
  });

  // Reset button click
  resetBtns.forEach(btn => {
    btn.addEventListener('click', function () {
      collectionFilters.forEach(f => f.classList.remove('selected'));
      iconFilters.forEach(f => f.classList.remove('select-icon-filter'));
      selectedCollection = null;
    });
  });
});

</script>

{% schema %}
{
  "name": "Collections list",
  "settings": [
    {
      "type": "radio",
      "id": "collections_to_show",
      "label": "Show collections",
      "options": [
        {
          "value": "all",
          "label": "All"
        },
        {
          "value": "selected",
          "label": "Selected"
        }
      ],
      "default": "all"
    },
    {
      "type": "link_list",
      "id": "collection_linklist",
      "label": "Menu",
      "info": "If you hit the block limit, use a menu to showcase more collections. Each link must reference a collection."
    },
    {
      "type": "checkbox",
      "id": "show_collection_title",
      "label": "Show collection title",
      "default": true
    },
    {
      "type": "text",
      "id": "section_name",
      "label": "Popular Collections Title"
    },
    {
      "type": "text",
      "id": "section_name_all",
      "label": "All Collections Title"
    },
    {
      "type": "checkbox",
      "id": "show_collection_overlay",
      "label": "Show collection overlay",
      "default": true
    },
    {
      "type": "text",
      "id": "excluded_collections",
      "label": "Excluded Collection (, splite)"
    },
    {
      "type": "range",
      "id": "collection_overlay_opacity",
      "label": "Overlay opacity",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "default": 20
    }
  ],
  "blocks": [
    {
      "type": "popular_collection",
      "name": "Popular Collection",
      "settings": [
        {
          "type": "text",
          "id": "collection_class",
          "label": "Custom CSS class",
          "default": "collection-class-custom"
        },
        {
          "type": "collection",
          "id": "popular_collection",
          "label": "Popular Collection"
        },
        {
          "type": "product",
          "id": "popular_product",
          "label": "Popular Product"
        },
        {
          "type": "textarea",
          "id": "product_description",
          "label": "Product Description"
        }
      ]
    },
    {
      "type": "collection_title_block",
      "name": "Show All Collections",
      "settings": [
        {
          "type": "text",
          "id": "section_name_all",
          "label": "Control Key",
          "default": "morecollection_all"
        },
        {
          "type": "text",
          "id": "collection_title",
          "label": "Title",
          "default": "More Collections"
        }
      ]
    },
    {
      "type": "menu",
      "name": "Filter theme Block",
      "settings": [
        {
          "type": "text",
          "id": "collection_class",
          "label": "Class"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Menu Title"
        },
        {
          "type": "text",
          "id": "menu_items",
          "label": "Comma-separated Menu Items (e.g. Animals,Children,Cities)"
        }
      ]
    },
    {
     "type": "icon_collection_block",
     "name": "Filter icons Block",
     "settings": [
        {
          "type": "text",
          "id": "collection_class_bar",
          "label": "Class",
          "default":"icon-block"
        },
        {
        "type": "text",
        "id": "title_sec",
        "label": "Block Title",
        "default": "Branch"
        },
        {
        "type": "textarea",
        "id": "menu_items_sec",
        "label": "Collection Titles (comma-separated)",
        "default": "Barber, Beauty, Restaurant & Bar, Gym & Fitness"
        },
        {
        "type": "textarea",
        "id": "icons",
        "label": "Icons (one per line, same order)",
        "default": "<svg xmlns='http://www.w3.org/2000/svg' fill='#e6007e' width='16' height='16' viewBox='0 0 24 24'><circle cx='12' cy='12' r='10'/></svg>\n<svg xmlns='http://www.w3.org/2000/svg' fill='#e6007e' width='16' height='16' viewBox='0 0 24 24'><rect width='16' height='16'/></svg>"
        }
     ]
    }
  ]
}
{% endschema %}